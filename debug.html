<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - File Loading Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>🧪 Shogun Auth Debug Page</h1>
    <p>Testing file loading and script availability...</p>
    
    <div id="status"></div>
    
    <script>
        function addStatus(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('status').appendChild(div);
            console.log(message);
        }
        
        // Test basic files
        addStatus('🔍 Starting file loading tests...');
        
        // Test if Gun.js loads
        fetch('/node_modules/gun/dist/gun.js')
            .then(response => {
                if (response.ok) {
                    addStatus('✅ Gun.js accessible via node_modules', 'success');
                } else {
                    addStatus('❌ Gun.js NOT accessible via node_modules', 'error');
                }
            })
            .catch(err => {
                addStatus('❌ Gun.js fetch failed: ' + err.message, 'error');
            });
        
        // Test if Shogun Core loads
        fetch('/shogun-core.js')
            .then(response => {
                if (response.ok) {
                    addStatus('✅ Shogun Core accessible via /shogun-core.js', 'success');
                } else {
                    addStatus('❌ Shogun Core NOT accessible via /shogun-core.js', 'error');
                }
            })
            .catch(err => {
                addStatus('❌ Shogun Core fetch failed: ' + err.message, 'error');
            });
        
        // Test public test file
        fetch('/test.txt')
            .then(response => {
                if (response.ok) {
                    addStatus('✅ Public directory test file accessible', 'success');
                } else {
                    addStatus('❌ Public directory test file NOT accessible', 'error');
                }
            })
            .catch(err => {
                addStatus('❌ Test file fetch failed: ' + err.message, 'error');
            });
        
        // Actually load and test Gun.js
        const gunScript = document.createElement('script');
        gunScript.src = 'https://cdn.jsdelivr.net/npm/gun/dist/gun.js';
        gunScript.onload = () => {
            addStatus('✅ Gun.js loaded successfully from CDN', 'success');
            if (typeof window.Gun !== 'undefined') {
                addStatus('✅ Gun.js is available as window.Gun', 'success');
            } else {
                addStatus('❌ Gun.js loaded but window.Gun is undefined', 'error');
            }
        };
        gunScript.onerror = () => {
            addStatus('❌ Failed to load Gun.js from CDN', 'error');
        };
        document.head.appendChild(gunScript);
        
        // Test Shogun Core loading
        setTimeout(() => {
            const shogunScript = document.createElement('script');
            shogunScript.src = '/shogun-core.js';
            shogunScript.onload = () => {
                addStatus('✅ Shogun Core loaded successfully', 'success');
                if (typeof window.initShogunBrowser !== 'undefined') {
                    addStatus('✅ Shogun Core is available as window.initShogunBrowser', 'success');
                } else {
                    addStatus('❌ Shogun Core loaded but window.initShogunBrowser is undefined', 'error');
                }
            };
            shogunScript.onerror = () => {
                addStatus('❌ Failed to load Shogun Core from /shogun-core.js', 'error');
            };
            document.head.appendChild(shogunScript);
        }, 1000);
        
        // Check for wallet extensions
        setTimeout(() => {
            if (typeof window.ethereum !== 'undefined') {
                addStatus('🦊 Ethereum wallet detected (probably MetaMask)', 'warning');
            } else {
                addStatus('❌ No Ethereum wallet detected', 'warning');
            }
        }, 2000);
    </script>
</body>
</html> 